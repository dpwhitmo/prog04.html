<html>

	<head>
		<style>
		label {
			width: 60px;
			text-align: right;
			padding-right: 10px;
			display: inline-block;
		}
		input[type="number"] {
			width:50px;
			margin-right: 25px;
		}
		</style>
	</head>

	<body onload="addForm();">

		<h1>Add Information</h1>
		
		<p> Add more rows of people to the table below. </p>
		
		<button type="button" onclick="addLine();">Add Line</button>
		<br />
		<br />
		
		<div id="div1">
		</div>
		
		<h1>Generate Objects</h1>
		
		<p> Information from the previous boxes displayed. </p>
		
		<button type="button" onclick="genObjectArray();">Display Objects</button>
		<br />
		
		<div id="div2">
		</div>
		
		<h1>Display Table Objects</h1>
		
		<p> Output the Data of the Array. </p>
		
		<button type="button" onclick="">Display Table</button>
		<br />
		<br />
		
		<div id="div3">
		</div>
		
		<!-- The table, below, shows examples of data. Do not include any HTML-coded table in your code. Instead, use JavaScript to append a table to the div, above. -->
		<table border="2">
		  <tr>
			<th>Local Name</th>
			<th>Local DOB</th>
			<th>Local Age</th>
			<th>Local Zodiac</th>
		  </tr>
		  <tr>
			<td>Billy Goat</td>
			<td>07-15-1958</td>
			<td>60</td>
			<td>Cancer</td>
		  </tr>
		  <tr>
			<td>Michael Scott</td>
			<td>02-04-1984</td>
			<td>34</td>
			<td>Aquarius</td>
		  </tr>

		</table>

		<script>
		
// GLOBAL VARIABLES

var currentLine = 0;
var inputWidth  = 10;
var objArray    = [];


function addForm() {
	// precondition: HTML must contain <div id="div1"> element

	// create a new form element, and append to div1
	var newelement = document.createElement("form");
	newelement.setAttribute("id","form1");
	var div1 = document.getElementById("div1");
	div1.appendChild(newelement);

	// create a new fieldset element, and append to form1
	var newelement = document.createElement("fieldset");
	newelement.setAttribute("id","fieldset1");
	var form1 = document.getElementById("form1");
	form1.appendChild(newelement);

	// create a new legend element, and append to fieldset1
	var newelement = document.createElement("legend");
	var textnode = document.createTextNode("People ");
	newelement.appendChild(textnode);
	var fieldset1 = document.getElementById("fieldset1");
	fieldset1.appendChild(newelement);

	// create a new label element, and append to fieldset1
	var newelement = document.createElement("label");
	newelement.setAttribute("for","fname"+currentLine);
	var textnode = document.createTextNode("First");
	newelement.appendChild(textnode);
	var fieldset1 = document.getElementById("fieldset1");
	fieldset1.appendChild(newelement);

	// create a new input element, and append to fieldset1
	var newelement = document.createElement("input");
	newelement.setAttribute("name","fname"+currentLine);
	newelement.setAttribute("id","fname"+currentLine);
	newelement.setAttribute("type","text");
	newelement.setAttribute("placeholder","");
	newelement.setAttribute("size",10);
	if (currentLine==0) newelement.setAttribute("autofocus","autofocus");
	var fieldset1 = document.getElementById("fieldset1");
	fieldset1.appendChild(newelement);

	// add more fields 
	addField("fieldset1", "lname", "Sir Name", "text", "", inputWidth);
	addField("fieldset1", "age", "Age", "number", "", inputWidth);
	addField("fieldset1", "country", "Country", "text", "", inputWidth);

	// add line break 
	var newelement = document.createElement("br");
	var fieldset1 = document.getElementById("fieldset1");
	fieldset1.appendChild(newelement);

	// increment line counter
	currentLine++;
}


function addLine () {
	// precondition: inputWidth global variable must be set
	// precondition: call from addForm() so HTML element with id="fieldset1" exists
	
	addField("fieldset1", "fname", "First", "text", "", inputWidth);
	addField("fieldset1", "lname", "Last", "text", "", inputWidth);
	addField("fieldset1", "age", "Age", "number", "", inputWidth);
	addField("fieldset1", "country", "Country", "text", "", inputWidth);
	var newelement = document.createElement("br");
	var fieldset1 = document.getElementById("fieldset1");
	fieldset1.appendChild(newelement);
	currentLine++;
}

/* addField()
 * inserts one label one input element into a row of a form 
 */
function addField(formId, namePrefix, labelText, dataType, placeholder, fieldSize) {
	// precondition: currentLine (global variable) must be set
	// precondition: objArray[] (global variable) must be declared
	// precondition: call from addLine() so HTML element with id=formID exists

	// create a new label element, and append to form (or fieldset)
	var n = document.createElement("label");
	n.setAttribute("for",namePrefix+currentLine);
	var t = document.createTextNode(labelText + " " );
	n.appendChild(t);
	var f = document.getElementById(formId);
	f.appendChild(n);
	
	// create a new input element, and append to form
	var n = document.createElement("input");
	n.setAttribute("name",namePrefix+currentLine);
	n.setAttribute("id",namePrefix+currentLine);
	n.setAttribute("type",dataType);
	n.setAttribute("placeholder",placeholder);
	n.setAttribute("size",fieldSize);
	var f = document.getElementById(formId);
	f.appendChild(n);

}


function genObjectArray() {
	// precondition: HTML must contain <div id="div2"> element
	// precondition: currentLine (global variable) must be set

	// generate objArray from HTML form elements
	for(i = 0; i < currentLine; i++) {
		objArray[i] = {
			'fname'     :document.getElementById("fname"+i).value,
			'lname'     :document.getElementById("lname"+i).value,
			'age'       :parseInt(document.getElementById("age"+i).value)?parseInt(document.getElementById("age"+i).value):0, 
			'country'   :document.getElementById("country"+i).value,
			'countryAge':function () {
				if('China'==this.country)
					return parseInt(this.age)+1; 
				else 
					return parseInt(this.age);
				}
		};
	}

	// display objArray
	var divContent = "<ol start='0'>";
	objArray.forEach(function(e) {
		divContent += '<li>';
		divContent += JSON.stringify(e);
		divContent += ' ... countryAge() == ' + e.countryAge();
		divContent += '</li>';
	});
	divContent += "</ol>";
	document.getElementById("div2").innerHTML = divContent;
}



			</script>
			
		</body>

	</html>

